#!/bin/bash

set -euo pipefail

echo "Generating services and messages for cf-copilot..."

pushd "${COPILOT_ROOT}/api/protos"
  protoc --ruby_out="${COPILOT_ROOT}/sdk/ruby/lib/copilot/protos" \
  --grpc_out="${COPILOT_ROOT}/sdk/ruby/lib/copilot/protos" \
  --plugin="protoc-gen-grpc=$(which grpc_tools_ruby_protoc_plugin)" \
  ./cloud_controller.proto
popd
